openapi: 3.0.3
info:
  title: Title
  description: Title
  version: 1.0.0
servers:
  - url: 'http://localhost:8091'
components:
  schemas:
    msDataId:
      type: string
    chromatogramId:
      type: integer
      format: int64
      minimum: 0
    errorMsg:
      type: object
      properties:
        errorMsg:
          type: string
    countOnly:
      type: boolean
    limit:
      type: integer
      format: int64
      default: 50
      minimum: 1
    page:
      type: integer
      format: int64
      default: 1
      minimum: 1
    scanId:
      type: integer
      format: int64
      minimum: 0
    unique:
      type: boolean
      default: false

  parameters:
    msDataId:
      in: path
      name: msDataId
      description: the identifier for the MS data from mzML file
      schema:
        $ref: '#/components/schemas/msDataId'
      required: true
    chromatogramId:
      in: path
      name: chromatogramId
      description: the identifier of a chromatogram
      schema:
        $ref: '#/components/schemas/chromatogramId'
      required: true
    scanId:
      in: path
      name: scanId
      description: the identifier of the scan
      schema:
        $ref: '#/components/schemas/scanId'
      required: true
    countOnly:
      in: query
      name: countOnly
      description: get only the header with item count
      schema:
        $ref: '#/components/schemas/countOnly'
      required: false
    limit:
      in: query
      name: limit
      description: items per page
      schema:
        $ref: '#/components/schemas/limit'
      required: false
    page:
      in: query
      name: page
      description: page offset
      schema:
        $ref: '#/components/schemas/page'
      required: false
    unique:
      in: query
      name: unique
      description: get only unique values
      schema:
        $ref: '#/components/schemas/unique'
      required: false
    highMz:
      in: query
      name: highMz
      description: upper limit for Mz
      schema:
        type: number
        format: double
        default: 5000
      required: false
    lowMz:
      in: query
      name: lowMz
      description: lower limit for Mz
      schema:
        type: number
        format: double
        default: 0
      required: false
    resMz:
      in: query
      name: resMz
      description: resolution for Mz
      schema:
        type: number
        format: double
        default: 1
      required: false
  responses:
    400:
      description: error in request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/errorMsg'
    404:
      description: data not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/errorMsg'
  headers:
    X-Total-Count:
      schema:
        type: integer
        format: int64


paths:
  /file:
    post:
      operationId: postFile
      description: Sent a file to the server
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                filename:
                  type: string
                file:
                  type: string
                  format: binary
      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    $ref: '#/components/schemas/msDataId'
        400:
          $ref: '#/components/responses/400'

  /msdata/{msDataId}/filename:
    parameters:
      - $ref: '#/components/parameters/msDataId'
    get:
      operationId: getFileName
      responses:
        200:
          description: get filename
          content:
            application/json:
              schema:
                type: object
                properties:
                  filename:
                    type: string
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'


  /msdata/{msDataId}/instrument:
    parameters:
      - $ref: '#/components/parameters/msDataId'
    get:
      operationId: getInstrumentData
      responses:
        200:
          description: get instrument data
          content:
            application/json:
              schema:
                type: object
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/run:
    parameters:
      - $ref: '#/components/parameters/msDataId'
    get:
      operationId: getRunData
      responses:
        200:
          description: get run data
          content:
            application/json:
              schema:
                type: object
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/instrument/analyzer:
    parameters:
      - $ref: '#/components/parameters/msDataId'
    get:
      operationId: getInstrumentAnalyzer
      responses:
        200:
          description: get analyzer
          content:
            application/json:
              schema:
                type: object
                properties:
                  analyzer:
                    type: string
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/instrument/detector:
    parameters:
      - $ref: '#/components/parameters/msDataId'
    get:
      operationId: getInstrumentDetector
      responses:
        200:
          description: get detector
          content:
            application/json:
              schema:
                type: object
                properties:
                  detector:
                    type: string
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/instrument/ionisation:
    parameters:
      - $ref: '#/components/parameters/msDataId'
    get:
      operationId: getIonisationMethod
      responses:
        200:
          description: get ionisation
          content:
            application/json:
              schema:
                type: object
                properties:
                  ionisation:
                    type: string
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/instrument/manufacturer:
    parameters:
      - $ref: '#/components/parameters/msDataId'
    get:
      operationId: getInstrumentManufacturer
      responses:
        200:
          description: get manufacturer
          content:
            application/json:
              schema:
                type: object
                properties:
                  manufacturer:
                    type: string
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'


  /msdata/{msDataId}/instrument/model:
    parameters:
      - $ref: '#/components/parameters/msDataId'
    get:
      operationId: getInstrumentModel
      responses:
        200:
          description: get model
          content:
            application/json:
              schema:
                type: object
                properties:
                  model:
                    type: string
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/instrument/sample:
    parameters:
      - $ref: '#/components/parameters/msDataId'
    get:
      operationId: getSampleData
      responses:
        200:
          description: get sample
          content:
            application/json:
              schema:
                type: object
                properties:
                  sample:
                    type: string
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/instrument/software:
    parameters:
      - $ref: '#/components/parameters/msDataId'
    get:
      operationId: getSoftware
      responses:
        200:
          description: get software
          content:
            application/json:
              schema:
                type: object
                properties:
                  software:
                    type: string
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/instrument/source:
    parameters:
      - $ref: '#/components/parameters/msDataId'
    get:
      operationId: getSource
      responses:
        200:
          description: get source
          content:
            application/json:
              schema:
                type: object
                properties:
                  source:
                    type: string
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/scans:
    parameters:
      - $ref: '#/components/parameters/msDataId'
      - $ref: '#/components/parameters/countOnly'
      - $ref: '#/components/parameters/limit'
      - $ref: '#/components/parameters/page'
    get:
      operationId: getScansData
      responses:
        200:
          description: get scans
          headers:
            X-Total-Count:
              $ref: '#/components/headers/X-Total-Count'
          content:
            application/json:
              schema:
                type: object
                properties:
                  scans:
                    type: array
                    items:
                      type: integer
                      format: int64
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/scan/{scanId}/header:
    parameters:
      - $ref: '#/components/parameters/msDataId'
      - $ref: '#/components/parameters/scanId'
    get:
      operationId: getScanHeader
      responses:
        200:
          description: get scan header
          content:
            application/json:
              schema:
                type: object
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/scan/{scanId}/peaks:
    parameters:
      - $ref: '#/components/parameters/msDataId'
      - $ref: '#/components/parameters/scanId'
    get:
      operationId: getScanPeaks
      responses:
        200:
          description: get peaks
          headers:
            X-Total-Count:
              $ref: '#/components/headers/X-Total-Count'
          content:
            application/json:
              schema:
                type: object
                properties:
                  peaks:
                    type: array
                    items:
                      type: number
                      format: double
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/IsolationWindows:
    parameters:
      - $ref: '#/components/parameters/msDataId'
      - $ref: '#/components/parameters/unique'
    get:
      operationId: getIsolationWindows
      responses:
        200:
          description: get isolation windows
          headers:
            X-Total-Count:
              $ref: '#/components/headers/X-Total-Count'
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    Scan:
                      $ref: '#/components/schemas/scanId'
                    IsolationWindows:
                      type: object
                      properties:
                        low:
                          type: number
                          format: double
                        high:
                          type: number
                          format: double
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/chromatograms:
    parameters:
      - $ref: '#/components/parameters/msDataId'
      - $ref: '#/components/parameters/limit'
      - $ref: '#/components/parameters/page'
      - $ref: '#/components/parameters/countOnly'
    get:
      operationId: getChromatograms
      responses:
        200:
          headers:
            X-Total-Count:
              $ref: '#/components/headers/X-Total-Count'
          description: get chromatograms
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/chromatograms/{chromatogramId}:
    parameters:
      - $ref: '#/components/parameters/msDataId'
      - $ref: '#/components/parameters/chromatogramId'
    get:
      operationId: getChromatogramData
      responses:
        200:
          description: get chromatogram
          content:
            application/json:
              schema:
                type: object
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'


  /msdata/{msDataId}/chromatograms/{chromatogramId}/header:
    parameters:
      - $ref: '#/components/parameters/msDataId'
      - $ref: '#/components/parameters/chromatogramId'
    get:
      operationId: getChromatogramHeader
      responses:
        200:
          description: get chromatogram header
          content:
            application/json:
              schema:
                type: object
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'

  /msdata/{msDataId}/3dmap/{scanId}:
    parameters:
      - $ref: '#/components/parameters/msDataId'
      - $ref: '#/components/parameters/scanId'
      - $ref: '#/components/parameters/lowMz'
      - $ref: '#/components/parameters/highMz'
      - $ref: '#/components/parameters/resMz'

    get:
      operationId: get3dMap
      responses:
        200:
          description: get 3D map
          content:
            application/json:
              schema:
                type: object
        400:
          $ref: '#/components/responses/400'
        404:
          $ref: '#/components/responses/404'


